var y="0.0.5";var l="\u{1F3BC} Cumbia:",v=t=>console.error(`${l} ${t}`),x=t=>console.warn(`${l} ${t}`),E=t=>console.info(`${l} ${t}`),s={error:v,warn:x,info:E};var L=t=>{let o="data-value",e={};return t.querySelectorAll(`[${o}]`).forEach(r=>{let n=r.getAttribute(o)||"default_name",c=r.innerHTML;r.tagName==="INPUT"&&(c=r.value),e[n]={el:r,value:c}}),e},p=L;var M=(t,o,e,{prevent:a})=>r=>{let n=o[e];if(a&&r.preventDefault(),!n)return s.warn(`Action -->"${e}"<-- not defined in component.`);let c=p(t);n(c)},i=M;var V=(t,o)=>{let e="data-action";t.querySelectorAll(`[${e}]`).forEach(r=>{let n=r.getAttribute(e)||"default_action_name";if(n==="submit"){if(t.tagName!=="FORM")return s.error("Trying to handle submit handler outside of form");t.addEventListener("submit",i(t,o,n,{prevent:!0}));return}if(r.tagName==="INPUT"){r.addEventListener("change",i(t,o,n,{prevent:!1}));return}r.addEventListener("click",i(t,o,n,{prevent:!1}))})},g=V;var $=(t,o)=>{let e="data-action-key";t.querySelectorAll(`[${e}]`).forEach(r=>{let n=r.getAttribute(e)||"default_action_name";r.addEventListener("keyup",i(t,o,n,{prevent:!1}))})},b=$;var H=(t,o)=>{let e=p(o);t.init&&t.init(e)},C=H;var u=new Map,F=(t,o)=>{let e=u.get(t)||[];e.push(o),u.set(t,e)},w=(t,o)=>{(u.get(t)||[]).forEach(a=>{a?a(o):console.warn("Topic not found")})},f={on:F,emit:w};var I=(t,o,e)=>{let a=e.trim();if(!o.has(a))return s.warn(`Component -->"${a}"<-- was not found.`);let r=o.get(a);if(!r)return s.error("Undefined component");let n=r({el:t,on:f.on,emit:f.emit});C(n,t),(n==null?void 0:n.actions)&&(g(t,n.actions),b(t,n.actions))},T=I;var d=new Map,m=new Map,A="data-component",N=",",P=t=>{document.querySelectorAll(`[${A}]`).forEach(e=>{if(d.has(e))return;d.set(e,!0),(e.getAttribute(A)||"").split(N).forEach(n=>T(e,m,n))}),(t==null?void 0:t.globalInitialisers)&&t.globalInitialisers.length&&t.globalInitialisers.forEach(e=>{let a=[...d.keys()];e(a)})},h=P;var S=(t,o)=>{t.length||s.error("No components passed"),t.forEach(e=>{if(!e.name)return s.error("Component name not defined, please give a name to your component");m.has(e.name)&&s.warn(`Name collision detected. ${e.name} was previously defined`),m.set(e.name,e)}),h(o)};s.info(`Initializing ${y}`);var it=S;export{it as default};
